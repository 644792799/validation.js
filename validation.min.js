/**
 * @author Matt Hinchliffe <http://www.maketea.co.uk>
 * @version 1.0.1
 * @modified 26/05/2011
 * @title Validation.js
 * @fileOverview Standalone Javascript form validation. No gimmicks, fluff or feature bloat.
 */
function Validate(a,c,d){var e={form_valid:true,errors:{},valid:{},init:function(f,h,i){if(i===undefined){i={}}var g=this;this.id=f;this.model=h;this.options={error_node:i.error_node||"span",error_class:i.error_class||"error",error_list_class:i.error_list_class||"error_list",error_display:i.error_display!==false,error_message:i.error_message||"The given value is invalid.",error_placement:i.error_placement||"after"};if(!(this.form=document.getElementById(f))||typeof h!=="object"){return null}this.bind("submit",function(k){g.form_valid=true;g.clear_error("list__"+g.id);for(var j in g.model){g.validate(j)}k.returnValue=g.form_valid;if(!g.form_valid&&k.preventDefault){k.preventDefault()}})},bind:function(g,f,h){h=h||this.form;if(typeof h==="string"){h=document.getElementById(h)}if(h.addEventListener){h.addEventListener(g,f,false)}else{h.attachEvent("on"+g,f)}},error_list:function(){var g;if(!(g=document.getElementById("list__"+this.id))){g=document.createElement("ol");g.setAttribute("id","list__"+this.id);g.className=this.options.error_list_class;if(this.options.error_placement=="list-top"){var f=this.form.firstChild;this.form.insertBefore(g,f)}else{this.form.appendChild(g)}}return g},create_error:function(k,h){this.errors[k.id]=h;if(!h&&!this.options.error_display){return}if(this.options.error_placement=="list-top"||this.options.error_placement=="list-bottom"){var j=this.error_list()}var f=j||k.parentNode,m=document.createTextNode(h),g=j?"li":this.options.error_node,l=document.createElement(g);l.setAttribute("id","error__"+k.id);l.className=this.options.error_class;l.appendChild(m);if(this.options.error_placement=="before"&&!j){var i=f.firstChild;f.insertBefore(l,i)}else{f.appendChild(l)}},clear_error:function(g){var f=document.getElementById("error__"+g);if(f){f.parentNode.removeChild(f)}},get_error:function(f){return this.errors[f]||undefined},is_valid:function(f){return !!(this.valid[f])},validate:function(f){var j;this.clear_error(f);if(!(j=document.getElementById(f))){return}var i=this.get_value(j);for(var k in this.model[f]){if(k!="error_message"){if(typeof this[k]!=="function"){break}var h=this.model[f][k],g=h.error_message||(this.model[f].error_message||this.options.error_message);if(Object.prototype.toString.call(h)==="[object Object]"){h=h.arguments}if(!(Array.isArray?Array.isArray(h):Object.prototype.toString.call(h)==="[object Array]")){h=[h]}if(this[k].apply(this,[i].concat(h))===false){this.valid[f]=this.form_valid=false;this.create_error(j,g);break}else{this.valid[f]=true}}}},get_value:function(g){var f;if(g.nodeName.toLowerCase()=="input"){f=g.getAttribute("type")}if(f&&(f=="checkbox"||f=="radio")){return g.checked?true:false}else{return g.value!==undefined?g.value.replace(/^\s\s*/,"").replace(/\s\s*$/,""):false}},present:function(h,g){var f;if(typeof h=="boolean"){f=h}else{if(!h){f=false}else{f=(h.length>0)}}return(g)?f:!f},expressions:{alphanumeric:/^([a-z0-9_\-])$/,text:/^(^[a-z])+$/,email:/^([a-z0-9_\.\-]+)@([\da-z\.\-]+)\.([a-z\.]{2,6})$/,url:/^(https?:\/\/)?([\da-z\.\-]+)\.([a-z\.]{2,6})([\/\w \.\-]*)*\/?$/,date:/^(([0-3][0-9]|[1-9])[\/\-\.]([0-1][0-9]|[1-9])[\/\-\.]([0-9][0-9])?[0-9][0-9])$/,time:/^(([0-2])?[0-9]:[0-5][0-9])$/},test:function(g,f){if(!this.present(g,true)){return null}if(this.expressions[f]){return !!(this.expressions[f]).test(g.toString())}else{return false}},valid_date:function(j,i,g){var l,f,k,h;j=j.split(g||"-").join(",");if(!(l=j.match(/^(\d{1,2})[,](\d{1,2})[,](\d{2,4})$/))){return false}f=parseInt(i?l[2]:l[1],10);k=parseInt(i?l[1]:l[2],10);h=parseInt(l[3].length==2?"20"+l[3]:l[3],10);if(f<1||f>31||k<1||k>12||h<1900||h>2100){return false}else{if(f>30&&k in {4:"",6:"",9:"",11:""}){return false}else{if(k==2&&!(f<=28||(f==29&&(h%4===0&&(h%100!==0||h%400===0))))){return false}}}return true},longer_than:function(g,f){return(g.toString().length>=f)},shorter_than:function(g,f){return(g.toString().length<=f)},is_int:function(h,g){var f=((parseFloat(h,10)==parseInt(h,10))&&!isNaN(h));return(g)?f:!f},greater_than:function(f,g){return this.compare_numbers(f,g,">")},less_than:function(f,g){return this.compare_numbers(f,g,"<")},compare_numbers:function(g,h,f){if(!this.present(g,true)){return null}h=new Number(h).valueOf();g=new Number(g).valueOf();if(g===NaN||h===NaN){return false}switch(f){case">":result=(g>h);break;case">=":result=(g>=h);break;case"<":result=(g<h);break;case"<=":result=(g<=h);break;case"*":result=(g%h===0);break;case"/":result=(h%g===0);break;case"!":result=(g!=h);break;default:result=(g==h);break}},match:function(h,g){var i=document.getElementById(g),f=i?this.get_value(i):null;return(h===f)}};var b=Object.create(e);b.init(a,c,d);return b}if(typeof Object.create!=="function"){Object.create=function(b){function a(){}a.prototype=b;return new a()}};