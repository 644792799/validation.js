/**
 * @author Matt Hinchliffe <http://www.maketea.co.uk>
 * @version 1.0.0RC
 * @modified 30/03/2011
 * @fileOverview Standalone Javascript form validation. No gimmicks, fluff or feature bloat.
 */

function Validate(a,c,d){var e={form_valid:true,errors:{},valid:{},init:function(f,h,i){this.options={error_node:i.error_node||"span",error_class:i.error_class||"error",error_list_class:i.error_list_class||"error_list",error_display:i.error_display!==false,error_message:i.error_message||"The given value is invalid.",error_placement:i.error_placement||"after"};if(!(this.form=document.getElementById(f))||typeof h!=="object"){return null}this.id=f;this.model=h;var g=this;this.bind(function(m){g.clear_error("list__"+g.id);for(var j in g.model){var o;if(!(o=document.getElementById(j))){break}g.clear_error(j);var n=g.get_value(o);for(var p in g.model[j]){if(p!="error_message"){if(typeof g[p]!=="function"){break}var l=g.model[j][p],k=l.error_message||(g.model[j].error_message||g.options.error_message);if(Object.prototype.toString.call(l)==="[object Object]"){l=l.arguments}if(!(Array.isArray?Array.isArray(l):Object.prototype.toString.call(l)==="[object Array]")){l=[l]}if(g[p].apply(g,[n].concat(l))===false){g.valid[j]=g.form_valid=false;g.create_error(o,k);break}else{g.valid[j]=true}}}}m.returnValue=g.form_valid;if(!g.form_valid&&m.preventDefault){m.preventDefault()}})},bind:function(f){if(this.form.addEventListener){this.form.addEventListener("submit",f,false)}else{this.form.attachEvent("onsubmit",f)}},error_list:function(){var g;if(!(g=document.getElementById("list__"+this.id))){g=document.createElement("ol");g.setAttribute("id","list__"+this.id);g.className=this.options.error_list_class;if(this.options.error_placement=="list-top"){var f=this.form.firstChild;this.form.insertBefore(g,f)}else{this.form.appendChild(g)}}return g},create_error:function(k,h){this.errors[k.id]=h;if(!h&&!this.options.error_display){return}if(this.options.error_placement=="list-top"||this.options.error_placement=="list-bottom"){var j=this.error_list()}var f=j||k.parentNode,m=document.createTextNode(h),g=j?"li":this.options.error_node,l=document.createElement(g);l.setAttribute("id","error__"+k.id);l.className=this.options.error_class;l.appendChild(m);if(this.options.error_placement=="before"&&!j){var i=f.firstChild;f.insertBefore(l,i)}else{f.appendChild(l)}},clear_error:function(g){var f=document.getElementById("error__"+g);if(f){f.parentNode.removeChild(f)}},get_error:function(f){return this.errors[f]||undefined},is_valid:function(f){return !!(this.valid[f])},get_value:function(g){var f;if(g.nodeName.toLowerCase()=="input"){f=g.getAttribute("type")}if(f&&(f=="checkbox"||f=="radio")){return g.checked?true:false}else{return g.value!==undefined?g.value:false}},present:function(h,g){var f;if(typeof h=="boolean"){f=h}else{if(!h){f=false}else{f=!!(h.length>0)}}return(g)?f:!f},expressions:{alphanumeric:/^([a-z0-9_\-])$/,number:/^([0-9])+$/,text:/^(^[a-z])+$/,email:/^([a-z0-9_\.\-]+)@([\da-z\.\-]+)\.([a-z\.]{2,6})$/,url:/^(https?:\/\/)?([\da-z\.\-]+)\.([a-z\.]{2,6})([\/\w \.\-]*)*\/?$/,date:/^(([0-3][0-9]|[1-9])[\/\-\.]([0-1][0-9]|[1-9])[\/\-\.]([0-9][0-9])?[0-9][0-9])$/,time:/^(([0-2])?[0-9]:[0-5][0-9])$/},test:function(g,f){if(!this.present(g,true)){return null}if(this.expressions[f]){return !!(this.expressions[f]).test(g.toString())}else{return false}},valid_date:function(i,h,l){var k,f,j,g;if(!this.present(i,true)){return null}i=i.split(l||"-").join(",");if(!(k=i.match(/^(\d{1,2})[,](\d{1,2})[,](\d{2,4})$/))){return false}f=parseInt(h?k[2]:k[1],10);j=parseInt(h?k[1]:k[2],10);g=parseInt(k[3].length==2?"20"+k[3]:k[3],10);if(f<1||f>31||j<1||j>12||g<1900||g>2100){return false}else{if(f>30&&j in {4:"",6:"",9:"",11:""}){return false}else{if(j==2&&!(f<=28||(f==29&&(g%4===0&&(g%100!==0||g%400===0))))){return false}}}return true},minimum_length:function(f,g){if(!this.present(f,true)){return null}return !!(f.length>=g)},maximum_length:function(f,g){if(!this.present(f,true)){return null}return !!(f.length<=g)},greater_than:function(f,g){if(!this.present(f,true)){return null}return !!(parseInt(f,10)>=g)},less_than:function(f,g){if(!this.present(f,true)){return null}return !!(parseInt(f,10)<=g)},match:function(h,g){var i=document.getElementById(g),f=i?this.get_value(i):null;return !!(h===f)}};var b=Object.create(e);b.init(a,c,d);return b}if(typeof Object.create!=="function"){Object.create=function(b){function a(){}a.prototype=b;return new a()}};